{"version":3,"file":"IsLoading.js","sources":["../../src/plugins/IsLoading.js"],"sourcesContent":["/**\n * Copyright (c) 2024 Anthony Mugendi\n *\n * This software is released under the MIT License.\n * https://opensource.org/licenses/MIT\n */\n\nimport css from '../styles/plugins/loader.css';\n\nexport default class Plugin {\n  constructor(ctx) {\n    // inherit Scriptin (this.Scriptin) context which we will need\n    Object.assign(this, ctx);\n\n    ctx.showLoader = this.showLoader.bind(this);\n    ctx.hideLoader = this.hideLoader.bind(this);\n\n    this.dependencies = ['__styler', 'AutoResource'];\n\n  }\n\n  init() {\n    // Inject loading css to head\n    var head = document.head || document.body;\n    var style = document.createElement('style');\n    style.textContent = css;\n    head.appendChild(style);\n  }\n\n  showLoader(el) {\n    var loaderDiv = document.createElement('div');\n    loaderDiv.setAttribute('class', 'scriptin-loader');\n    loaderDiv.setAttribute('title', 'Scriptin loading ' + el.dataset.scriptin);\n    loaderDiv.setAttribute('data-loader', el.dataset.scriptin);\n    loaderDiv.innerHTML = '<div class=\"loader\"></div> ';\n\n    this.copyStyles(el, loaderDiv);\n\n    el.after(loaderDiv);\n    el.classList.add('scriptin-hidden');\n  }\n\n  hideLoader(el) {\n    // get loader\n    var loaderDiv = document.querySelector(\n      '[data-loader=\"' + el.dataset.scriptin + '\"]'\n    );\n    // remove\n    if (loaderDiv) loaderDiv.remove();\n    el.classList.remove('scriptin-hidden');\n  }\n\n  copyStyles(el, loaderDiv) {\n    var styles = window.getComputedStyle(el);\n    var cssText;\n\n    if (styles.cssText !== '') {\n      loaderDiv.style.cssText = styles.cssText;\n    } else {\n      cssText = Object.values(styles).reduce(\n        (css, propertyName) =>\n          `${css}${propertyName}:${styles.getPropertyValue(propertyName)};`\n      );\n\n      cssText =\n        cssText +\n        'min-width: 64px; min-height: 32px;  display: inline-block; margin: 2.5px;';\n\n      // apply custom styles\n      var customStyles = this.options?.plugins?.IsLoading?.styles || {};\n      if (typeof customStyles == 'object') {\n        for (var n in customStyles) {\n          cssText = cssText + n + ':' + customStyles[n] + ';';\n        }\n      }\n\n      loaderDiv.style.cssText = cssText;\n    }\n  }\n}\n"],"names":["constructor","ctx","Object","assign","this","showLoader","bind","hideLoader","dependencies","init","head","document","body","style","createElement","textContent","appendChild","el","loaderDiv","setAttribute","dataset","scriptin","innerHTML","copyStyles","after","classList","add","querySelector","remove","cssText","styles","window","getComputedStyle","_this$options","values","reduce","css","propertyName","getPropertyValue","customStyles","options","plugins","IsLoading","n"],"mappings":"qDASe,MACbA,WAAAA,CAAYC,GAEVC,OAAOC,OAAOC,KAAMH,GAEpBA,EAAII,WAAaD,KAAKC,WAAWC,KAAKF,MACtCH,EAAIM,WAAaH,KAAKG,WAAWD,KAAKF,MAEtCA,KAAKI,aAAe,CAAC,WAAY,eAEnC,CAEAC,IAAAA,GAEE,IAAIC,EAAOC,SAASD,MAAQC,SAASC,KACjCC,EAAQF,SAASG,cAAc,SACnCD,EAAME,snCACNL,EAAKM,YAAYH,EACnB,CAEAR,UAAAA,CAAWY,GACT,IAAIC,EAAYP,SAASG,cAAc,OACvCI,EAAUC,aAAa,QAAS,mBAChCD,EAAUC,aAAa,QAAS,oBAAsBF,EAAGG,QAAQC,UACjEH,EAAUC,aAAa,cAAeF,EAAGG,QAAQC,UACjDH,EAAUI,UAAY,8BAEtBlB,KAAKmB,WAAWN,EAAIC,GAEpBD,EAAGO,MAAMN,GACTD,EAAGQ,UAAUC,IAAI,kBACnB,CAEAnB,UAAAA,CAAWU,GAET,IAAIC,EAAYP,SAASgB,cACvB,iBAAmBV,EAAGG,QAAQC,SAAW,MAGvCH,GAAWA,EAAUU,SACzBX,EAAGQ,UAAUG,OAAO,kBACtB,CAEAL,UAAAA,CAAWN,EAAIC,GACb,IACIW,EADAC,EAASC,OAAOC,iBAAiBf,GAGrC,GAAuB,KAAnBa,EAAOD,QACTX,EAAUL,MAAMgB,QAAUC,EAAOD,YAC5B,CAAA,IAAAI,EACLJ,EAAU3B,OAAOgC,OAAOJ,GAAQK,QAC9B,SAACC,EAAKC,GAAY,MACf,GAAED,IAAMC,KAAgBP,EAAOQ,iBAAiBD,KAAgB,IAGrER,GAEE,4EAGF,IAAIU,GAA2B,QAAZN,EAAI7B,KAACoC,eAAO,IAAAP,GAASA,QAATA,EAAZA,EAAcQ,eAAOR,IAAAA,GAAW,QAAXA,EAArBA,EAAuBS,iBAAS,IAAAT,OAAA,EAAhCA,EAAkCH,SAAU,CAAA,EAC/D,GAA2B,iBAAhBS,EACT,IAAK,IAAII,KAAKJ,EACZV,EAAUA,EAAUc,EAAI,IAAMJ,EAAaI,GAAK,IAIpDzB,EAAUL,MAAMgB,QAAUA,CAC5B,CACF"}