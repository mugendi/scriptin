(()=>{"use strict";class t{get(t){let e=null;try{if(!window.localStorage)return null;const r=localStorage.getItem(t);r&&(e=JSON.parse(r))}catch(t){console.error(t)}return e}set(t,e){return window.localStorage?localStorage.setItem(t,JSON.stringify(e)):null}clearAll(){return localStorage().clear()}}class e{constructor(e){this.store=e||new t}get(t){const e=this.store.get(t);if(!e)return null;const{expire:r,value:s}=e;return r<Date.now()?(this.store.remove(t),null):s}set(t,e,r=null){if(r&&"number"==typeof r)r=Math.round(1e3*r+Date.now());else if(r&&r instanceof Date)r=r.getTime();else if(r)throw new Error("Expire must be either a date or int (seconds)");return this.store.set(t,{value:e,expire:r},r)}clear(){return store.clearAll()}}const r=new class{constructor({methods:t=["get","post","head","put","post"]}={}){for(let e of t)this[e]=(t,r,s={})=>this.__fetch(t,e,r)}__fetch(t,e,r){return new Promise(((s,n)=>{!function(t,e,r,s,n){var o,a=[];if("object"==typeof r){for(var i in r)r.hasOwnProperty(i)&&(a[a.length]=i+"="+r[i]);r=a.join("&")}if("undefined"!=typeof XMLHttpRequest)o=new XMLHttpRequest;else for(var c=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],l=0,h=c.length;l<h;l++)try{o=new ActiveXObject(c[l]);break}catch(t){}var d=navigator.userAgent.toLowerCase();o.onreadystatechange=function(){if(this.readyState===this.HEADERS_RECEIVED){const t=o.getAllResponseHeaders().trim().split(/[\r\n]+/),e={};t.forEach((t=>{const r=t.split(": "),s=r.shift(),n=r.join(": ");e[s]=n})),o.headers=e}},-1!=d.indexOf("msie")&&-1==d.indexOf("opera")&&-1==d.indexOf("webtv")?o.onreadystatechange=function(){4===this.readyState&&(this.status>=200&&this.status<400?s(o):n(o))}:o.onload=function(t){200==this.status?s(o):n(o)},e="post"==e||"POST"==e?"POST":"GET",o.open(e,t,!0),"POST"==e&&o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(r)}(t,e,r,(function(t){s({data:t.responseText,headers:t.headers})}),n)}))}};window.ajax=r,window.Scriptin=class{constructor({ttl:t=2592e3}={}){this.headEl=document.querySelector("head, body, html"),this.opts={ttl:t},this.store=new e}async __init(){try{if(window.store)return;await this.__ajax_load({url:"https://cdn.jsdelivr.net/npm/store@2.0.12/dist/store.legacy.min.js",cache:!0}),this.store=new e(window.store)}catch(t){throw console.error(t),t}}__head_script(t){return new Promise(((e,r)=>{try{const r=document.createElement("script");r.setAttribute("src",t),this.headEl.appendChild(r),r.onload=function(){e()}}catch(t){throw t}}))}async load(t){var e;let r;await this.__init(),t=(t=void 0===(e=t)?[]:Array.isArray(e)?e:[e]).map((t=>("string"==typeof t&&(t={url:t}),t=Object.assign({cache:!0},t)))).filter((t=>!t.hasOwnProperty("test")||t.test));for(let e of t)r=await this.__ajax_load(e)}clear(){return this.store.clear()}async __ajax_load(t){try{var{content:e,type:s}=t.cache&&this.store&&await this.store.get(t.url)||{};if(!e){var{content:e,type:s}=await r.get(t.url).then((t=>{let e,r=t.headers["content-type"];return r.indexOf("/css;")>-1?e="css":r.indexOf("/javascript;")>-1&&(e="js"),{type:e,content:t.data}}));e&&s&&t.cache&&this.store.set(t.url,{content:e,type:s},this.opts.ttl)}return t=Object.assign(t,{content:e,type:s}),await this.__inject_script(t)}catch(t){throw t}}__inject_script({type:t,content:e}){let r;if("js"==t)r=document.createElement("script"),this.headEl.appendChild(r),r.textContent=e;else if("css"==t){let t=document.createElement("style");this.headEl.appendChild(t),t.textContent=e}return{tagEl:r,type:t,content:e}}}})();